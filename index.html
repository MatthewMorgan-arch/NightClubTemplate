<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lost Property — Quick Upload</title>
  <style>
    :root {
      --accent: #2b6cb0;
      --bg: #f8f9fb;
      --card-bg: #fff;
      --radius: 12px;
      --shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Helvetica, Arial;
      background: var(--bg);
      color: #222;
      margin: 0;
      padding: 2rem 1rem;
      display: flex;
      justify-content: center;
    }
    main {
      width: 100%;
      max-width: 480px;
      background: var(--card-bg);
      padding: 2rem;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    h1 {
      text-align: center;
      margin-top: 0;
      font-size: 1.6rem;
    }
    p.small {
      text-align: center;
      font-size: 0.9rem;
      color: #555;
      margin-bottom: 1.5rem;
    }
    label {
      display: block;
      margin-bottom: 0.9rem;
      font-weight: 500;
    }
    input, select {
      font-size: 1rem;
      width: 100%;
      padding: 0.6rem 0.8rem;
      margin-top: 0.4rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      background: #fff;
      box-sizing: border-box;
      transition: border-color 0.2s;
    }
    input:focus, select:focus {
      outline: none;
      border-color: var(--accent);
    }
    fieldset {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 1rem;
      margin-top: 1rem;
      background: #f9f9f9;
    }
    legend {
      font-weight: 600;
      color: #333;
      padding: 0 0.5rem;
    }
    button.btn {
      width: 100%;
      background: var(--accent);
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 0.8rem;
      font-size: 1rem;
      cursor: pointer;
      margin-top: 1rem;
      transition: background 0.2s;
    }
    button.btn:hover {
      background: #1a4f88;
    }
    .hidden { display: none; }

    #overlay {
      display: none;
      position: fixed;
      inset: 0;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.6);
      color: #fff;
      font-size: 1.2rem;
      z-index: 999;
    }

    #result {
      display: none;
      margin-top: 1rem;
      padding: 1rem;
      border-radius: 8px;
      background: #e6ffed;
      border: 1px solid #b7f5c0;
      color: #22543d;
      text-align: center;
      animation: fadeIn 0.4s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <main>
    <h1>Lost Property Upload</h1>
    <p class="small">Scan QR → add details → submit. Photos retained 30 days.</p>

    <form id="uploadForm" 
      action="https://hook.eu2.make.com/gkebdrmtjlkwd6wikd1wsmoht4x41p9v" 
      method="post" enctype="multipart/form-data" target="hidden_iframe" autocomplete="off">
      
      <input type="hidden" name="venue" id="venueInput" value="Club X">
      <input type="hidden" name="venue_id" value="6662fb70-7f65-4a34-9fbc-dc8bc7e3b92b">
      <input type="hidden" name="status" value="Logged">
      <input type="hidden" name="claim_readiness_score" value="88.0">

      <label>Photo (required)
        <input type="file" name="photo" accept="image/*;capture=camera" required>
      </label>

      <label>Category
        <select name="category" id="categorySelect" required>
          <option value="">SELECT...</option>
          <option>ID</option>
          <option>WALLET</option>
          <option>PHONE</option>
          <option>KEYS</option>
          <option>CARD</option>
          <option>BAG</option>
          <option>CLOTHING</option>
          <option>OTHER</option>
        </select>
      </label>

      <label>Short Description (required)
        <input name="desc" maxlength="120" placeholder="e.g. black leather wallet" required>
      </label>

      <label>Storage Location (optional)
        <input name="storage_location" maxlength="80" placeholder="e.g. Safe box A2">
      </label>

      <!-- Conditional fields -->
      <fieldset id="idFields" class="hidden">
        <legend>ID Details</legend>
        <label>First Name <input name="id_firstName" placeholder="First Name on ID"></label>
        <label>Last Name <input name="id_lastName" placeholder="Last Name on ID"></label>
        <label>ID Number (last 4 digits only)<input name="id_number" placeholder="1234"></label>
      </fieldset>

      <fieldset id="walletFields" class="hidden">
        <legend>Wallet — Card Name</legend>
        <label>First Name <input name="wallet_firstName"></label>
        <label>Last Name <input name="wallet_lastName"></label>
      </fieldset>

      <fieldset id="cardFields" class="hidden">
        <legend>Card Details</legend>
        <label>First Name <input name="card_firstName" placeholder="First Name on Card"></label>
        <label>Last Name <input name="card_lastName" placeholder="Last Name on Card"></label>
      </fieldset>

      <label>Found by (optional)
        <input name="found_by" maxlength="50" placeholder="e.g. Joe - bar staff">
      </label>

      <button class="btn" type="submit">Upload</button>
    </form>

    <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>
    <div id="overlay">Uploading… please wait</div>
    <div id="result">Upload received. Keep item secure. Add claim code to manager noticeboard.</div>
  </main>

  <script>
  (function(){
    const params = new URLSearchParams(location.search);
    const venue = params.get('venue') || 'Club X';
    document.getElementById('venueInput').value = venue;

    const form = document.getElementById('uploadForm');
    const overlay = document.getElementById('overlay');
    const result = document.getElementById('result');
    const iframe = document.getElementById('hidden_iframe');
    const categorySelect = document.getElementById('categorySelect');
    const idFields = document.getElementById('idFields');
    const walletFields = document.getElementById('walletFields');
    const cardFields = document.getElementById('cardFields');

    categorySelect.addEventListener('change', () => {
      [idFields, walletFields, cardFields].forEach(f => f.classList.add('hidden'));
      const val = categorySelect.value;
      if (val === 'ID') idFields.classList.remove('hidden');
      else if (val === 'WALLET') walletFields.classList.remove('hidden');
      else if (val === 'CARD') cardFields.classList.remove('hidden');
    });

    form.addEventListener('submit', () => {
      overlay.style.display = 'flex';
      result.style.display = 'none';
    });

    iframe.addEventListener('load', () => {
      overlay.style.display = 'none';
      result.style.display = 'block';
      form.reset();
      [idFields, walletFields, cardFields].forEach(f => f.classList.add('hidden'));
    });
  })();
  </script>
</body>
</html>
